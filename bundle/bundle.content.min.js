var componentHandler={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};(componentHandler=function(){"use strict";function e(e,t){for(var s=0;s<a.length;s++)if(a[s].className===e)return void 0!==t&&(a[s]=t),a[s];return!1}function t(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function s(e,s){return-1!==t(e).indexOf(s)}function n(e,t,s){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:s});var n=document.createEvent("Events");return n.initEvent(e,t,s),n}function i(t,s){if(void 0===t&&void 0===s)for(var n=0;n<a.length;n++)i(a[n].className,a[n].cssClass);else{var o=t;if(void 0===s){var l=e(o);l&&(s=l.cssClass)}for(var c=document.querySelectorAll("."+s),d=0;d<c.length;d++)r(c[d],o)}}function r(i,r){if(!("object"==typeof i&&i instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var o=n("mdl-componentupgrading",!0,!0);if(i.dispatchEvent(o),!o.defaultPrevented){var d=t(i),p=[];if(r)s(i,r)||p.push(e(r));else{var h=i.classList;a.forEach(function(e){h.contains(e.cssClass)&&-1===p.indexOf(e)&&!s(i,e.className)&&p.push(e)})}for(var m,u=0,f=p.length;u<f;u++){if(!(m=p[u]))throw new Error("Unable to find a registered component for the given class.");d.push(m.className),i.setAttribute("data-upgraded",d.join(","));var g=new m.classConstructor(i);g[c]=m,l.push(g);for(var _=0,v=m.callbacks.length;_<v;_++)m.callbacks[_](i);m.widget&&(i[m.className]=g);var b=n("mdl-componentupgraded",!0,!1);i.dispatchEvent(b)}}}function o(e){Array.isArray(e)||(e=e instanceof Element?[e]:Array.prototype.slice.call(e));for(var t,s=0,n=e.length;s<n;s++)(t=e[s])instanceof HTMLElement&&(r(t),t.children.length>0&&o(t.children))}var a=[],l=[],c="mdlComponentConfigInternal_";return{upgradeDom:i,upgradeElement:r,upgradeElements:o,upgradeAllRegistered:function(){for(var e=0;e<a.length;e++)i(a[e].className)},registerUpgradedCallback:function(t,s){var n=e(t);n&&n.callbacks.push(s)},register:function(t){var s=!0;void 0===t.widget&&void 0===t.widget||(s=t.widget||t.widget);var n={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:s,callbacks:[]};if(a.forEach(function(e){if(e.cssClass===n.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===n.className)throw new Error("The provided className has already been registered")}),t.constructor.prototype.hasOwnProperty(c))throw new Error("MDL component classes must not have "+c+" defined as a property.");e(t.classAsString,n)||a.push(n)},downgradeElements:function(e){var t=function(e){l.filter(function(t){return t.element_===e}).forEach(function(e){if(e){var t=l.indexOf(e);l.splice(t,1);var s=e.element_.getAttribute("data-upgraded").split(","),i=s.indexOf(e[c].classAsString);s.splice(i,1),e.element_.setAttribute("data-upgraded",s.join(","));var r=n("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(r)}})};if(e instanceof Array||e instanceof NodeList)for(var s=0;s<e.length;s++)t(e[s]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");t(e)}}}}()).ComponentConfigPublic,componentHandler.ComponentConfig,componentHandler.Component,componentHandler.upgradeDom=componentHandler.upgradeDom,componentHandler.upgradeElement=componentHandler.upgradeElement,componentHandler.upgradeElements=componentHandler.upgradeElements,componentHandler.upgradeAllRegistered=componentHandler.upgradeAllRegistered,componentHandler.registerUpgradedCallback=componentHandler.registerUpgradedCallback,componentHandler.register=componentHandler.register,componentHandler.downgradeElements=componentHandler.downgradeElements,window.componentHandler=componentHandler,window.componentHandler=componentHandler,window.addEventListener("load",function(){"use strict";"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),componentHandler.upgradeAllRegistered()):(componentHandler.upgradeElement=function(){},componentHandler.register=function(){})}),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialSelectfield=e,e.prototype.Constant_={},e.prototype.CssClasses_={LABEL:"mdl-selectfield__label",SELECT:"mdl-selectfield__select",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded"},e.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},e.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},e.prototype.onReset_=function(e){this.updateClasses_()},e.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty()},e.prototype.checkDisabled=function(){this.select_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},e.prototype.checkDisabled=e.prototype.checkDisabled,e.prototype.checkValidity=function(){this.select_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID)},e.prototype.checkValidity=e.prototype.checkValidity,e.prototype.checkDirty=function(){this.select_.value&&this.select_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},e.prototype.checkDirty=e.prototype.checkDirty,e.prototype.disable=function(){this.select_.disabled=!0,this.updateClasses_()},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.select_.disabled=!1,this.updateClasses_()},e.prototype.enable=e.prototype.enable,e.prototype.change=function(e){e&&(this.select_.value=e),this.updateClasses_()},e.prototype.change=e.prototype.change,e.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.select_=this.element_.querySelector("."+this.CssClasses_.SELECT),this.select_)){this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.select_.addEventListener("change",this.boundUpdateClassesHandler),this.select_.addEventListener("focus",this.boundFocusHandler),this.select_.addEventListener("blur",this.boundBlurHandler),this.select_.addEventListener("reset",this.boundResetHandler);var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID)}},e.prototype.mdlDowngrade_=function(){this.select_.removeEventListener("change",this.boundUpdateClassesHandler),this.select_.removeEventListener("focus",this.boundFocusHandler),this.select_.removeEventListener("blur",this.boundBlurHandler),this.select_.removeEventListener("reset",this.boundResetHandler)},componentHandler.register({constructor:e,classAsString:"MaterialSelectfield",cssClass:"mdl-js-selectfield",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialTooltip=e,e.prototype.Constant_={},e.prototype.CssClasses_={IS_ACTIVE:"is-active",BOTTOM:"mdl-tooltip--bottom",LEFT:"mdl-tooltip--left",RIGHT:"mdl-tooltip--right",TOP:"mdl-tooltip--top"},e.prototype.handleMouseEnter_=function(e){var t=e.target.getBoundingClientRect(),s=t.left+t.width/2,n=t.top+t.height/2,i=this.element_.offsetWidth/2*-1,r=this.element_.offsetHeight/2*-1;this.element_.classList.contains(this.CssClasses_.LEFT)||this.element_.classList.contains(this.CssClasses_.RIGHT)?(s=t.width/2,n+r<0?(this.element_.style.top="0",this.element_.style.marginTop="0"):(this.element_.style.top=n+"px",this.element_.style.marginTop=r+"px")):s+i<0?(this.element_.style.left="0",this.element_.style.marginLeft="0"):(this.element_.style.left=s+"px",this.element_.style.marginLeft=i+"px"),this.element_.classList.contains(this.CssClasses_.TOP)?this.element_.style.top=t.top-this.element_.offsetHeight-10+"px":this.element_.classList.contains(this.CssClasses_.RIGHT)?this.element_.style.left=t.left+t.width+10+"px":this.element_.classList.contains(this.CssClasses_.LEFT)?this.element_.style.left=t.left-this.element_.offsetWidth-10+"px":this.element_.style.top=t.top+t.height+10+"px",this.element_.classList.add(this.CssClasses_.IS_ACTIVE)},e.prototype.hideTooltip_=function(){this.element_.classList.remove(this.CssClasses_.IS_ACTIVE)},e.prototype.init=function(){if(this.element_){var e=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for");e&&(this.forElement_=document.getElementById(e)),this.forElement_&&(this.forElement_.hasAttribute("tabindex")||this.forElement_.setAttribute("tabindex","0"),this.boundMouseEnterHandler=this.handleMouseEnter_.bind(this),this.boundMouseLeaveAndScrollHandler=this.hideTooltip_.bind(this),this.forElement_.addEventListener("mouseenter",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("touchend",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("mouseleave",this.boundMouseLeaveAndScrollHandler,!1),window.addEventListener("scroll",this.boundMouseLeaveAndScrollHandler,!0),window.addEventListener("touchstart",this.boundMouseLeaveAndScrollHandler))}},componentHandler.register({constructor:e,classAsString:"MaterialTooltip",cssClass:"mdl-tooltip"})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialProgress=e,e.prototype.Constant_={},e.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},e.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},e.prototype.setProgress=e.prototype.setProgress,e.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},e.prototype.setBuffer=e.prototype.setBuffer,e.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,(e=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,(e=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:e,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})}(),function(){!function(e){var t={};chrome.storage.sync.get(null,function(s){var n=s.learnjavascriptmarks,i=s.learnjavascriptoptions;if(n&&i){t.marks=JSON.parse(n),t.mark_id=t.mark_id?t.mark_id:[],t.progress=t.progress?t.progress:[],i=JSON.parse(i);for(var r in i)t[r]=i[r];delete s.learnjavascriptmarks,delete s.learnjavascriptoptions;for(var o in s)s[o.replace(/\D+/g,"")]=s[o],delete s[o];for(var a in s)t.mark_id.push(s[a]);e(!1)}else e(!1)})}(function(e){var t=e||{marks:["S","?","!","&#10003;","&#9733;"],pallete:["color: #000; background-color: #fff","color: #fff; background-color: #2196F3","color: #fff; background-color: #f44336","color: #fff; background-color: #4caf50","color: #ffffff; background-color: #ffc107"],desc:["Выбрать","Не все ясно","Важно","Усвоено","Прочитано"],mark_id:[],progress:[]},s=[3e5,6e4,6e4,6e4];setTimeout(function(){!function(e,t,s,n,i,r,o,a){function l(){c=t.querySelectorAll(s),d=t.querySelector(r)}var c=null,d=null,p={items:{},indx:{},time:0,count_learned:0,resetData:function(e){e&&(this.time=this.getAndSetTime(!0),this.count_learned=0)},getAndSetMarks:function(e,t){var s=this;chrome.storage.local.get("learnjavascriptmarks",function(n){n.learnjavascriptmarks?e=JSON.parse(n.learnjavascriptmarks):chrome.storage.local.set({learnjavascriptmarks:JSON.stringify(e)}),console.log(e),s.items=e,t()})},getAndSetTime:function(e){var t=new Date;return t=Date.parse(t),e&&(this.time=t),t},getAssocObjectOnPage:function(t){var s=e.location.pathname.replace(/^\/{1,}/,"");this.getAndSetTime(!0),chrome.storage.local.get("learnjavascriptmarks",function(e){var n=-1;(e=JSON.parse(e.learnjavascriptmarks)).progress.some(function(e,t){if(e.url&&e.url==s)return n=t,!0}),t(e,n)})},setAssocObjectMustScroll:function(t,s){var n=t.progress[s];n.must_scroll[0]=d?d.offsetTop+d.offsetHeight-e.innerHeight:0,n.must_scroll[1]=e.innerWidth,this.items=t,this.indx=s,console.log(n)},setObjectScrolled:function(e){var t=this.items.progress[this.indx].scrolled;this.items.progress[this.indx].scrolled=e>t?e:t},saveAssocObject:function(){chrome.storage.local.set({learnjavascriptmarks:JSON.stringify(this.items)})},setTimeSpent:function(){var e=this.time,t=this.getAndSetTime();this.items.progress[this.indx].time_spent+=t-e},setIsLearn:function(){this.items.progress[this.indx].scrolled>=this.items.progress[this.indx].must_scroll[0]&&this.items.progress[this.indx].time_spent>=this.items.progress[this.indx].time_must_spend&&(this.items.progress[this.indx].learned=!0)},mapListeners:function(){t.addEventListener("click",function(e){var t=e.target;/\bclose-button\b/.test(t.className)&&this.resetData(!0)}.bind(this)),t.addEventListener("keyup",function(e){27==e.keyCode&&this.resetData(!0)}.bind(this))},pageListeners:function(){e.addEventListener("resize",function(){this.setAssocObjectMustScroll(this.items,this.indx)}.bind(this)),e.addEventListener("scroll",function(){this.setObjectScrolled(e.pageYOffset)}.bind(this)),t.addEventListener("click",function(e){var t=e.target;/^map/.test(t.className)&&(this.setTimeSpent(),this.setIsLearn(),this.saveAssocObject())}.bind(this)),e.addEventListener("beforeunload",function(e){this.setTimeSpent(),this.setIsLearn(),this.saveAssocObject()}.bind(this))},addControls:function(e){var s=this,i=!!this.items.progress[0];[].forEach.call(c,function(n,r,o){var a=s.items.mark_id[r],l=t.createElement("div"),c=t.createElement("select"),d=null,p="parent_"+r,h=t.createElement("label");l.className="mdl-selectfield mdl-selectfield--mini mdl-js-selectfield mdl-selectfield--floating-label";var m=s.addTooltip("s_"+r);c.id="s_"+r,c.className="mdl-selectfield__select",h.className="mdl-selectfield__label",h.for="s_"+r,s.items.marks.forEach(function(e,s){(d=t.createElement("option")).value=s,d.innerHTML=e,c.appendChild(d)}),l.appendChild(c),l.appendChild(h),l.appendChild(m),componentHandler.upgradeElement(l),n.firstElementChild.insertAdjacentElement("beforebegin",l),n.style.display="flex",n.style.alignItems="baseline",n.style.flexWrap="wrap",n.children[1].style.width="calc(100% - 77px)",n.querySelector("ul").style.width="100%",n.querySelector("ul").style.padding="7px 0",l.style.marginRight="10px",n.id=p,s.selectMark(c,a,i,n,e[r],r),s.setSelectTooltipText(c,a,m)}),console.log("Кол-во изученных уроков: "+this.count_learned),this.addProgress(n),chrome.storage.local.set({learnjavascriptmarks:JSON.stringify(this.items)})},initProgressHash:function(e,t){var s={url:e.href?e.href.replace(/.+\.ru\//,""):"",learned:!1,scrolled:0,must_scroll:[],time_spent:0,time_must_spend:t||0};this.items.progress.push(s)},getIndexMarkComplete:function(e){var t=this.items.desc.map(function(e,t){return e.toLowerCase()}),s=-1;return isFinite(e)&&(t=t.splice(e,1)),["усвоено","изучено","выполнено"].concat(e?["важно"]:[]).some(function(e,n){if(~(s=t.indexOf(e)))return!0}),s},selectMark:function(e,t,s,n,i,r){var o=n.querySelector(".tutorial-map-list-three__link");s?this.items.progress[r].time_must_spend||(this.items.progress[r].time_must_spend=i):this.initProgressHash(o,i);var a=this.items.progress[r].learned;t&&0!=+t?e.options[t]?(e.options.selectedIndex=t,e.setAttribute("style",this.items.pallete[t]),a&&~this.getIndexMarkComplete(t)&&this.count_learned++):e.options.selectedIndex=0:a&&(e.options.selectedIndex=this.getIndexMarkComplete(),e.setAttribute("style",this.items.pallete[e.options.selectedIndex]),this.count_learned++)},addTooltip:function(e){var s=t.createElement("div");return s.className="mdl-tooltip",s.setAttribute("data-mdl-for",e),setTimeout(function(){componentHandler.upgradeElement(s)},0),s},setSelectTooltipText:function(e,t,s){t?t>e.options.length-1?(this.items.mark_id[indx]=0,s.textContent=this.items.desc[0]):s.textContent=this.items.desc[t]:s.textContent=this.items.desc[0]},count:function(){},selectChange:function(){var e=this;t.addEventListener("change",function(s){var n=s.target;if("SELECT"==n.tagName){var i=n.parentNode.parentNode.id.replace(/\D+/g,""),r=n.value;e.items.mark_id[i]=r,chrome.storage.local.set({learnjavascriptmarks:JSON.stringify(e.items)}),n.setAttribute("style",e.items.pallete[n.value]),n.parentNode.querySelector(".mdl-tooltip").textContent=e.items.desc[n.value],e.setProgress(t.getElementById("p1"))}})},addProgress:function(e){var s=this;if(e=t.querySelectorAll(e)[0]){var n=t.createElement("div");n.id="p1",n.className="mdl-progress mdl-js-progress",componentHandler.upgradeElement(n),e.insertAdjacentElement("afterend",n);var i=this.addTooltip("p1");n.appendChild(i),setTimeout(function(){s.setProgress(n)},800)}},setProgress:function(e){var t=this.count_learned/217*100;e.firstElementChild.style.width=t+"%",e.querySelector(".mdl-tooltip").textContent="Кол-во изученных уроков: "+this.count_learned+" Прогресс: "+t.toFixed(2)+"%"}};l(),o(p,c,d),t.addEventListener("click",function(e){(e.target.classList.contains(i[0])||e.target.classList.contains(i[1]))&&setTimeout(function(){l(),o(p,c)},a)})}(window,document,".tutorial-map-list-three__item",".tutorial-map-list__title",["map","map__text"],".content article",function(e,n,i){e.getAndSetMarks(t,function(){n.length||"/"==window.location.pathname||!i?(e.mapListeners(),e.addControls(s),e.selectChange()):e.getAssocObjectOnPage(function(t,s){e.setAssocObjectMustScroll(t,s),setTimeout(function(){e.pageListeners()},1e3)})})},1e3)},1e3)})}();